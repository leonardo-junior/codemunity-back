// Planet scale
// generator client {
//   provider = "prisma-client-js"
// }

// datasource db {
//   provider = "mysql"
//   url = env("DATABASE_URL")
//   relationMode = "prisma"
// }

// LOCAL
// generator client {
//   provider = "prisma-client-js"
// }

// datasource db {
//   provider = "mysql"
//   url      = env("DATABASE_URL")
// }

// cockroachlabs
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "cockroachdb"
  url      = env("DATABASE_URL")
}

model Class {
  id String @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  name            String
  url             String
  courseSectionId String  @db.Uuid  @map("course_section_id")

  courseSections CourseSection @relation(fields: [courseSectionId], references: [id])

  @@map("class")
  @@index([courseSectionId])
}

model Course {
  id String @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  name String

  courseSections CourseSection[]

  @@map("course")
}

model CourseSection {
  id String @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  name     String
  courseId String  @db.Uuid  @map("course_id")

  course  Course  @relation(fields: [courseId], references: [id])
  classes Class[]

  @@map("course_section")
  @@index([courseId])
}
